import os
import zipfile36 as zipfile
from rarfile import RarFile

def get_password_list(filepath):
    file_list = os.listdir(filepath)
    result_set = set()
    for index, file in enumerate(file_list):
        if index > 1:
            break
        file = filepath + '/' + file
        with open(file, 'r', encoding='utf8', errors='ignore') as f:
            data = f.readlines()
            for p in data:
                result_set.add(p.replace('\n', ''))
    return result_set


import zipfile


def main():
	"""
	Zipfile password cracker using a brute-force dictionary attack
	"""
	zipfilename = 'test.zip'
	dictionary = 'dictionary.txt'

	password = None
	zip_file = zipfile.ZipFile(zipfilename)
	with open(dictionary, 'r') as f:
		for line in f.readlines():
			password = line.strip('\n')
			try:
				zip_file.extractall(pwd=password)
				password = 'Password found: %s' % password
			except:
				pass
	print password

if __name__ == '__main__':
	main()


if __name__ == '__main__':
    filepath = 'password_files'
    set = get_password_list(filepath)
    # print(set)
    zip_filepath = "C:/Users/neal/Desktop/flag.rar"
